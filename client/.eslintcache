[{"/Users/pagaia/Activism/cico-contaiciclisti/client/src/reportWebVitals.js":"1","/Users/pagaia/Activism/cico-contaiciclisti/client/src/index.js":"2","/Users/pagaia/Activism/cico-contaiciclisti/client/src/App.js":"3","/Users/pagaia/Activism/cico-contaiciclisti/client/src/utility/utilityFunctions.js":"4","/Users/pagaia/Activism/cico-contaiciclisti/client/src/utility/constants.js":"5","/Users/pagaia/Activism/cico-contaiciclisti/client/src/components/YesterdayHourly.js":"6","/Users/pagaia/Activism/cico-contaiciclisti/client/src/components/DailyAverage.js":"7","/Users/pagaia/Activism/cico-contaiciclisti/client/src/components/HourlyAverage.js":"8","/Users/pagaia/Activism/cico-contaiciclisti/client/src/components/About.js":"9","/Users/pagaia/Activism/cico-contaiciclisti/client/src/components/LastCount.js":"10","/Users/pagaia/Activism/cico-contaiciclisti/client/src/components/footer.js":"11","/Users/pagaia/Activism/cico-contaiciclisti/client/src/components/Footer.js":"12","/Users/pagaia/Activism/cico-contaiciclisti/client/src/components/ScrollTo.js":"13"},{"size":362,"mtime":1607794596704,"results":"14","hashOfConfig":"15"},{"size":514,"mtime":1607882939367,"results":"16","hashOfConfig":"15"},{"size":1560,"mtime":1607883828939,"results":"17","hashOfConfig":"15"},{"size":5849,"mtime":1607875382867,"results":"18","hashOfConfig":"15"},{"size":786,"mtime":1607869609121,"results":"19","hashOfConfig":"15"},{"size":1350,"mtime":1607882830596,"results":"20","hashOfConfig":"15"},{"size":2160,"mtime":1607882806962,"results":"21","hashOfConfig":"15"},{"size":1387,"mtime":1607882817574,"results":"22","hashOfConfig":"15"},{"size":1540,"mtime":1607881651272,"results":"23","hashOfConfig":"15"},{"size":1468,"mtime":1607880387538,"results":"24","hashOfConfig":"15"},{"size":244,"mtime":1607881722821,"results":"25","hashOfConfig":"15"},{"size":300,"mtime":1607883890367,"results":"26","hashOfConfig":"15"},{"size":449,"mtime":1607883818936,"results":"27","hashOfConfig":"15"},{"filePath":"28","messages":"29","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},"chyk9i",{"filePath":"31","messages":"32","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"33","messages":"34","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"35"},{"filePath":"36","messages":"37","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"38"},{"filePath":"39","messages":"40","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"35"},{"filePath":"41","messages":"42","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"43","messages":"44","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"45","messages":"46","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"47","usedDeprecatedRules":"35"},{"filePath":"48","messages":"49","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"50","messages":"51","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"52","usedDeprecatedRules":"35"},{"filePath":"53","messages":"54","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"55","messages":"56","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"57","messages":"58","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/Users/pagaia/Activism/cico-contaiciclisti/client/src/reportWebVitals.js",[],["59","60"],"/Users/pagaia/Activism/cico-contaiciclisti/client/src/index.js",["61"],"/Users/pagaia/Activism/cico-contaiciclisti/client/src/App.js",[],["62","63"],"/Users/pagaia/Activism/cico-contaiciclisti/client/src/utility/utilityFunctions.js",["64","65","66","67","68"],"/**\n * calculate the start and end date for today\n */\nexport const getBeginningOfToday = () => {\n  let start = new Date();\n  return start.toISOString().split(\"T\")[0];\n};\n\n/**\n * calculate the start and end date for yesterday\n */\nexport const getYesterdayStartEnd = () => {\n  let end = new Date();\n  let start = new Date(end);\n\n  start.setDate(start.getDate() - 1);\n\n  end = end.toISOString().split(\"T\")[0];\n  start = start.toISOString().split(\"T\")[0];\n\n  return { start, end };\n};\n\n/**\n * calculate the start and end date for previous month\n */\nexport const getLastMonthStartEnd = () => {\n  let end = new Date();\n  end.setDate(1);\n  let start = new Date(end);\n  start.setMonth(start.getMonth() - 1);\n\n  end = end.toISOString().split(\"T\")[0];\n  start = start.toISOString().split(\"T\")[0];\n\n  return { start, end };\n};\n\n\n/**\n * This function gets the list of counts and device information and build labels and datasets for hourly counts\n *\n * @param {Array} feeds\n * @param {Object} device\n */\nexport const buildDataHourly = (feeds, device) => {\n  const { name: label, bgColor, borderColor, hbgColor } = device;\n\n  const labels = [];\n  const datasets = [\n    {\n      label,\n      backgroundColor: bgColor || \"rgba(54, 162, 235, 0.2)\",\n      borderColor: borderColor || \"rgba(54, 162, 235, 1)\",\n      borderWidth: 1,\n      hoverBackgroundColor: hbgColor || \"rgba(255,99,132,0.4)\",\n      // hoverBorderColor: \"rgba(255,99,132,1)\",\n      data: [],\n    },\n  ];\n\n  feeds.forEach((feed) => {\n    if (feed.field1) {\n      const hour =\n        feed.created_at.substring(11, 12) === \"0\"\n          ? feed.created_at.substring(12, 13)\n          : feed.created_at.substring(11, 13);\n      labels.push(hour);\n      datasets[0].data.push(parseInt(feed.field1, 10));\n    }\n  });\n  return { labels, datasets };\n};\n\n/**\n * Utility function to sum up an array of numbers\n * @param {Number} accumulator\n * @param {Number} currentValue\n */\nconst sumReducer = (accumulator, currentValue) => accumulator + currentValue;\n\n/**\n *  This function gets the list of counts and device information and build labels and datasets for Daily Average counts\n *\n * @param {Array} feeds\n * @param {Object} device\n */\nexport const buildDataDailyAverage = (feeds, device) => {\n  const { name: label, bgColor, borderColor, hbgColor } = device;\n\n  const labels = [\n    \"Monday\",\n    \"Tuesday\",\n    \"Wednesday\",\n    \"Thursday\",\n    \"Friday\",\n    \"Saturday\",\n    \"Sunday\",\n  ];\n\n  const dataset = {\n    label,\n    backgroundColor: bgColor || \"rgba(54, 162, 235, 0.2)\",\n    borderColor: borderColor || \"rgba(54, 162, 235, 1)\",\n    borderWidth: 1,\n    hoverBackgroundColor: hbgColor || \"rgba(255,99,132,0.4)\",\n    data: [],\n  };\n\n  const weekDays = [];\n\n  feeds.forEach((feed) => {\n    if (feed.field1) {\n      const day = new Date(feed.created_at);\n      if (weekDays[day.getDay()]) {\n        weekDays[day.getDay()].push(parseInt(feed.field1, 10));\n      } else {\n        weekDays[day.getDay()] = [parseInt(feed.field1, 10)];\n      }\n    }\n  });\n\n  for (let i = 1; i < 7; i++) {\n    dataset.data.push(\n      parseInt(weekDays[i].reduce(sumReducer) / weekDays[i].length, 10)\n    );\n  }\n  dataset.data.push(\n    parseInt(weekDays[0].reduce(sumReducer) / weekDays[0].length, 10)\n  );\n\n  return dataset;\n};\n\n/**\n * This function gets the list of counts and device information and build labels and datasets for hourly Average counts\n *\n * @param {Array} feeds\n * @param {Object} device\n */\nexport const buildHourlyAverage = (feeds, device) => {\n  const { name: label, bgColor, borderColor, hbgColor } = device;\n\n  const labels = [...Array(23).keys()];\n\n  const datasets = [\n    {\n      label: \"Weekdays\",\n      backgroundColor: \"rgba(255, 99, 132, 0.2)\",\n      borderColor: \"rgba(255, 99, 132, 1)\",\n      hoverBackgroundColor: \"rgba(255, 99, 132, 0.6)\",\n      borderWidth: 1,\n      data: [],\n    },\n    {\n      label: \"Saturday\",\n      borderWidth: 1,\n      backgroundColor: \"rgba(54, 162, 235, 0.2)\",\n      borderColor: \"rgba(54, 162, 235, 1)\",\n      hoverBackgroundColor: \"rgba(54, 162, 235, 0.6)\",\n      data: [],\n    },\n    {\n      label: \"Sunday\",\n      borderWidth: 1,\n      backgroundColor: \"rgba(154, 162, 235, 0.2)\",\n      borderColor: \"rgba(154, 162, 235, 1)\",\n      hoverBackgroundColor: \"rgba(154, 162, 235, 0.6)\",\n      data: [],\n    },\n  ];\n\n  const weekDays = [];\n  const saturday = [];\n  const sunday = [];\n\n  feeds.forEach((feed) => {\n    if (feed.field1) {\n      const day = new Date(feed.created_at).getDay();\n      const hour = new Date(feed.created_at).getHours();\n\n      // Sunday\n      if (day === 0) {\n        if (sunday[hour]) {\n          sunday[hour].push(parseInt(feed.field1, 10));\n        } else {\n          sunday[hour] = [parseInt(feed.field1, 10)];\n        }\n      }\n      // Saturday\n      if (day === 6) {\n        if (saturday[hour]) {\n          saturday[hour].push(parseInt(feed.field1, 10));\n        } else {\n          saturday[hour] = [parseInt(feed.field1, 10)];\n        }\n      }\n\n      // weekdays\n      if (1 <= day <= 5) {\n        if (weekDays[hour]) {\n          weekDays[hour].push(parseInt(feed.field1, 10));\n        } else {\n          weekDays[hour] = [parseInt(feed.field1, 10)];\n        }\n      }\n    }\n  });\n\n  // adding hourly Average  for week days\n  weekDays.forEach((hour) => {\n    datasets[0].data.push(parseInt(hour.reduce(sumReducer) / hour.length, 10));\n  });\n\n  // adding hourly Average  for saturday\n  saturday.forEach((hour) => {\n    datasets[1].data.push(parseInt(hour.reduce(sumReducer) / hour.length, 10));\n  });\n\n  // adding hourly Average  for sunday\n  sunday.forEach((hour) => {\n    datasets[2].data.push(parseInt(hour.reduce(sumReducer) / hour.length, 10));\n  });\n\n  return { labels, datasets };\n};\n\n/**\n * random key genrator for ChartJs\n */\nexport const datasetKeyProvider = () => {\n  return btoa(Math.random()).substring(0, 12);\n};\n","/Users/pagaia/Activism/cico-contaiciclisti/client/src/utility/constants.js",[],"/Users/pagaia/Activism/cico-contaiciclisti/client/src/components/YesterdayHourly.js",["69"],"/Users/pagaia/Activism/cico-contaiciclisti/client/src/components/DailyAverage.js",["70","71"],"/Users/pagaia/Activism/cico-contaiciclisti/client/src/components/HourlyAverage.js",["72"],"import axios from \"axios\";\nimport { useEffect, useState } from \"react\";\nimport { Bar } from \"react-chartjs-2\";\nimport { REGEX_DEVICE } from \"../utility/constants\";\nimport {\n  buildHourlyAverage,\n  getLastMonthStartEnd,\n} from \"../utility/utilityFunctions\";\n\nconst deviceUrl = \"https://api.thingspeak.com/channels/DEVICE/feeds.json\";\n\nconst { start, end } = getLastMonthStartEnd();\n\nfunction HourlyAverage({ device }) {\n  // initialize dataset with empty array\n  const [datasets, setDatasets] = useState({});\n\n  async function fetchDeviceData() {\n    // replace with channelID\n    const apiEndPoint =\n      deviceUrl.replace(REGEX_DEVICE, device.channelId) +\n      `?start=${start}&end=${end}`;\n\n    // fetch data from a url endpoint\n    const response = await axios.get(apiEndPoint);\n    const { data } = response;\n    const builtDataset = buildHourlyAverage(data.feeds, device);\n    setDatasets(builtDataset);\n  }\n\n  useEffect(() => {\n    fetchDeviceData();\n  }, []);\n\n  if (!datasets.datasets) {\n    return null;\n  }\n  return (\n    <div className=\"row\">\n      <div className=\"col-sm\">\n        <div className=\"chart-wrapper\">\n          <Bar\n            data={datasets}\n            width={100}\n            height={50}\n            options={{\n              maintainAspectRatio: true,\n            }}\n          />\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default HourlyAverage;\n","/Users/pagaia/Activism/cico-contaiciclisti/client/src/components/About.js",[],"/Users/pagaia/Activism/cico-contaiciclisti/client/src/components/LastCount.js",["73"],"import axios from \"axios\";\nimport { useEffect, useState } from \"react\";\nimport { REGEX_DEVICE } from \"../utility/constants\";\nimport { format } from \"timeago.js\";\n\nconst deviceUrl = \"https://api.thingspeak.com/channels/DEVICE/feeds/last.json\";\n\nfunction LastCount({ device }) {\n  const [counts, setCounts] = useState({});\n\n  // replace with channelID\n  const apiEndPoint = deviceUrl.replace(REGEX_DEVICE, device.channelId);\n\n  const getCount = async () => {\n    let res = await axios.get(apiEndPoint);\n    let { data } = res;\n    setCounts(data);\n  };\n\n  useEffect(() => {\n    getCount();\n  }, []);\n\n  return (\n    <div className=\"last-counter\">\n      <div className=\"card last\">\n        <div className=\"card-body\">\n          <h5 className=\"card-title\">Last count</h5>\n          <p className=\"card-text inverted\">{counts.field1}</p>\n          <footer className=\"blockquote-footer\">\n            {\n              // format date string\n              format(counts.created_at)\n            }\n          </footer>\n        </div>\n      </div>\n\n      <div className=\"card last\">\n        <div className=\"card-body\">\n          <h5 className=\"card-title\">Total today</h5>\n          <p className=\"card-text inverted\">{counts.field8}</p>\n          <footer className=\"blockquote-footer\">\n            {\n              // format date string\n              format(counts.created_at)\n            }\n          </footer>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default LastCount;\n","/Users/pagaia/Activism/cico-contaiciclisti/client/src/components/footer.js",[],"/Users/pagaia/Activism/cico-contaiciclisti/client/src/components/Footer.js",["74"],"/Users/pagaia/Activism/cico-contaiciclisti/client/src/components/ScrollTo.js",[],{"ruleId":"75","replacedBy":"76"},{"ruleId":"77","replacedBy":"78"},{"ruleId":"79","severity":1,"message":"80","line":5,"column":8,"nodeType":"81","messageId":"82","endLine":5,"endColumn":23},{"ruleId":"75","replacedBy":"83"},{"ruleId":"77","replacedBy":"84"},{"ruleId":"79","severity":1,"message":"85","line":91,"column":9,"nodeType":"81","messageId":"82","endLine":91,"endColumn":15},{"ruleId":"79","severity":1,"message":"86","line":142,"column":17,"nodeType":"81","messageId":"82","endLine":142,"endColumn":22},{"ruleId":"79","severity":1,"message":"87","line":142,"column":24,"nodeType":"81","messageId":"82","endLine":142,"endColumn":31},{"ruleId":"79","severity":1,"message":"88","line":142,"column":33,"nodeType":"81","messageId":"82","endLine":142,"endColumn":44},{"ruleId":"79","severity":1,"message":"89","line":142,"column":46,"nodeType":"81","messageId":"82","endLine":142,"endColumn":54},{"ruleId":"90","severity":1,"message":"91","line":33,"column":6,"nodeType":"92","endLine":33,"endColumn":8,"suggestions":"93"},{"ruleId":"94","severity":1,"message":"95","line":49,"column":31,"nodeType":"96","messageId":"97","endLine":49,"endColumn":33},{"ruleId":"90","severity":1,"message":"98","line":54,"column":6,"nodeType":"92","endLine":54,"endColumn":8,"suggestions":"99"},{"ruleId":"90","severity":1,"message":"91","line":33,"column":6,"nodeType":"92","endLine":33,"endColumn":8,"suggestions":"100"},{"ruleId":"90","severity":1,"message":"101","line":22,"column":6,"nodeType":"92","endLine":22,"endColumn":8,"suggestions":"102"},{"ruleId":"79","severity":1,"message":"103","line":2,"column":8,"nodeType":"81","messageId":"82","endLine":2,"endColumn":16},"no-native-reassign",["104"],"no-negated-in-lhs",["105"],"no-unused-vars","'reportWebVitals' is defined but never used.","Identifier","unusedVar",["104"],["105"],"'labels' is assigned a value but never used.","'label' is assigned a value but never used.","'bgColor' is assigned a value but never used.","'borderColor' is assigned a value but never used.","'hbgColor' is assigned a value but never used.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'fetchDeviceData'. Either include it or remove the dependency array.","ArrayExpression",["106"],"array-callback-return","Array.prototype.map() expects a return value from arrow function.","ArrowFunctionExpression","expectedInside","React Hook useEffect has a missing dependency: 'devices'. Either include it or remove the dependency array.",["107"],["108"],"React Hook useEffect has a missing dependency: 'getCount'. Either include it or remove the dependency array.",["109"],"'ScrollTo' is defined but never used.","no-global-assign","no-unsafe-negation",{"desc":"110","fix":"111"},{"desc":"112","fix":"113"},{"desc":"110","fix":"114"},{"desc":"115","fix":"116"},"Update the dependencies array to be: [fetchDeviceData]",{"range":"117","text":"118"},"Update the dependencies array to be: [devices]",{"range":"119","text":"120"},{"range":"121","text":"118"},"Update the dependencies array to be: [getCount]",{"range":"122","text":"123"},[973,975],"[fetchDeviceData]",[1494,1496],"[devices]",[964,966],[593,595],"[getCount]"]